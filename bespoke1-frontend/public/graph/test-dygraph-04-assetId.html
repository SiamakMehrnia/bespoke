<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph 1</title>
    <script type="text/javascript" src="https://unpkg.com/dygraphs@2.2.1/dist/dygraph.min.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="https://unpkg.com/dygraphs@2.2.1/dist/dygraph.min.css" /> -->
    <style>
      /* Siehe Erläuterungen in dygraph.js */
       .dygraph-legend {
        width: 400px;  /* labelsDivWidth */ /* mod */  
        }

  /* TODO:Dark style */
  #graphdiv1 .dygraph-axis-label { color: white; }
  .dygraph-legend { text-align: right; }
  #graphdiv1 .dygraph-legend { background-color: #101015; }
  #graphdiv1 div { background-color: darkblue }
  
.tablecenter {
  margin-left: auto;
  margin-right: auto;
}
      </style>    
</head>
<body>

        <!-- dygraphs are not happy when placed inside a <center> tag. This applies to the CSS text-align property as well. If you want to center a Dygraph, put it inside a table with align = center set. -->
        <table class="tablecenter" style="overflow-x:auto;">
          <tr>
            <td>
              <div id="graphdiv4" style="background-color: #E9E7E7;"></div>
            </td>
          </tr>
        </table>
        <script type="text/javascript">
        Dygraph.onDOMready(function onDOMready() {
          let assetId = 'bitcoin';  // Hardcodiert für jetzt, gilt aber erstmal fuer gesamtes Script
          
          g1 = new Dygraph(
        
            // containing div
            document.getElementById("graphdiv4"),
        
            // CSV or path to a CSV file.
            // # If you don't specify the labels option, dygraphs will look at the first line of your CSV data to get the labels\n          
            // "1727867147993,61293.74211108704\n" +
            // "1727870608099,61160.627929869916\n" +
            // "1727874022044,60821.807369266025\n" +
            // "1727878134744,61497.550438711194",

            "data-01-bitcoin.csv", // path to CSV file, mit Datei funktioniert es genauso
            // options:
            {
              axes : {
                            
                x: {
                axisLabelFormatter: function(d) {
                    // Custom format: TT.MM.JJJ HH:MM
                    const date = new Date(d);
                    const day = String(date.getDate()).padStart(2, '0');
                    const month = String(date.getMonth() + 1).padStart(2, '0');
                    const year = date.getFullYear();
                    const hours = String(date.getHours()).padStart(2, '0');
                    const minutes = String(date.getMinutes()).padStart(2, '0');
                    return `${day}.${month}.${year} ${hours}:${minutes}`;
                },
                valueFormatter: Dygraph.dateString_,
                valueParser: function(x) { return 1000 * parseInt(x); },
                ticker: Dygraph.dateTicker,
                },
              
                y: {
                  axisLabelFormatter: function(y) {
                    // Format: 1.000,00 EUR
                    return y.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' USD';
                    // return y.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                  }
                },
                labels: ["Date", "assetId"], // Labels für die Achsen  
              },
              rollPeriod: 7,
              showRoller: true,
              resizable: "both",
              titleHeight: 32,
              strokeWidth: 1.5,
              // TODO: Bitcoin ersetzen durch tokenId
              title: 'Tokenkurve 1 / Asset: Bitcoin',
              ylabel: 'Wert in USD',
          }
        );
    });
    
    </script>


    
</body>
</html>